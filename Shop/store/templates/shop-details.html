{% extends "base.html" %}
{% load static %}
{% load i18n %}
{% block title %}
    {% for product in products %}
        {{ product.name }}
    {% endfor %}
{% endblock %}

{% block user_for_phone %}
    {% if request.user.is_authenticated %}
        <div class="header__top__right__auth">
            <a href="{% url 'profile' %}"><i class="fa fa-user"></i>{% trans 'Профиль' %}</a>
        </div>
        {% else %}
        <div class="header__top__right__auth">
            <a href="{% url 'login' %}"><i class="fa fa-user"></i>{% trans 'Вход' %}</a>
        </div>
    {% endif %}
{% endblock %}

{% block user_for_pc %}
    {% if request.user.is_authenticated %}
        <div class="header__top__right__auth">
            <a href="{% url 'profile' %}"><i class="fa fa-user"></i>{{ user.username }}</a>
        </div>
        {% else %}
        <div class="header__top__right__auth">
            <a href="{% url 'login' %}"><i class="fa fa-user"></i>{% trans 'Вход' %}</a>
        </div>
    {% endif %}
{% endblock %}

{% block content %}
    <section class="hero hero-normal">
        <div class="container">
            <div class="row">
                <div class="col-lg-3">
                    <div class="hero__categories">
                        <div class="hero__categories__all">
                            <i class="fa fa-bars"></i>
                            <span>{% trans 'Департаменты' %}</span>
                        </div>
                        <ul>
                            {% for department in departments %}
                            <li><a href="{% url 'shop_grid' %}/{{ department.url }}/">{{ department.name }}</a></li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
                <div class="col-lg-9">
                    <div class="hero__search">
                        <div class="hero__search__form">
                            <form action="#">
                                <input type="text" placeholder="{% trans 'Что Вы хотите найти?' %}">
                                <button type="submit" class="site-btn">{% trans 'Поиск' %}</button>
                            </form>
                        </div>
                        <div class="hero__search__phone">
                            <div class="hero__search__phone__icon">
                                <i class="fa fa-phone"></i>
                            </div>
                            <div class="hero__search__phone__text">
                                <h5>+65 11.188.888</h5>
                                <span>{% trans 'Поддержка' %} 24/7 time</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Hero Section End -->

    <!-- Breadcrumb Section Begin -->
    <section class="breadcrumb-section set-bg" data-setbg="{% static 'img/breadcrumb.jpg' %}">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <div class="breadcrumb__text">
                        <h2>{{ product.name }}</h2>
                        <div class="breadcrumb__option">
                            <a href="{% url 'main_page' %}">{% trans 'Домашняя страница' %}</a>
                            <a href="/">{{ product.department }}</a>
                            <span>{{ product.name }}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Breadcrumb Section End -->

    <!-- Product Details Section Begin -->
    <section class="product-details spad">
        <div class="container">
            <div class="row">
                <div class="col-lg-6 col-md-6">
                    <div class="product__details__pic">
                        <div class="product__details__pic__item">
                            <img class="product__details__pic__item--large"
                                src="{{ product.img.url }}" alt="">
                        </div>
                        <div class="product__details__pic__slider owl-carousel">
                            {% for photo in photos %}
                            <img data-imgbigurl="{{ photo.img.url }}"
                                src="{{ photo.img.url }}" alt="">
                            {% endfor %}
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6">
                    <div class="product__details__text">
                        <div class="pochenu">
                            <h3>{{ product.name }}</h3>
                            <div class="product__details__rating" >
<!--                                 <div class="fa" id="star_1" onclick="add_rating(1)" onmouseover="choose_stars('1')"><i class="fa fa-star"></i></div>
                                <div class="fa" id="star_2" onclick="add_rating(2)" onmouseover="choose_stars('2')"><i class="fa fa-star"></i></div>
                                <div class="fa" id="star_3" onclick="add_rating(3)" onmouseover="choose_stars('3')"><i class="fa fa-star"></i></div>
                                <div class="fa" id="star_4" onclick="add_rating(4)" onmouseover="choose_stars('4')"><i class="fa fa-star-half-o"></i></div>
                                <div class="fa" id="star_5" onclick="add_rating(5)" onmouseover="choose_stars('5')"><i class="fa fa-star-o"></i></div> -->

                                <div class="main_star">
                                    <div class="fa stars"><i class="fa fa-star" id="star_1"></i></div><div class="fa stars"><i class="fa fa-star" id="star_2"></i></div><div class="fa stars"><i class="fa fa-star" id="star_3"></i></div><div class="fa stars"><i class="fa fa-star-half-o" id="star_4"></i></div><div class="fa stars"><i class="fa fa-star-o" id="star_5"></i></div>
                                </div>


                                <form action="{% url 'add_rating' %}" method="POST" id="form_star" class="none">
                                    {% csrf_token %}
                                    <input type="text" name="stars_quantity" id="input_star" value="">
                                    <input type="text" name="product_id" value="{{ product.id }}">
                                    <input type="text" name="path" value="{{ request.path }}">
                                    <button id="btn_star"></button>
                                </form>

                                <span id="quantity_reviews_top"></span>
                            </div>
                        </div>
                        {% if product.price_with_sale %}
                            <div class="product__details__price">$<span id="price">{{ product.price_with_sale }}</span></div>
                        {% else %}
                            <div class="product__details__price">$<span id="price">{{ product.price }}</span></div>
                        {% endif %}
                        <div class="product__details__quantity">

                            <div class="pro-qty">
                                <span class="dec qtybtn">-</span>
                                <input type="text" value="1" id="value" disabled max="{{ product.quantity }}">
                                <span class="inc qtybtn">+</span>
                            </div>
                        </div>
                        <a href="#" class="primary-btn">{% trans 'ДОБАВИТЬ В КОРЗИНУ' %}</a>
                                    {% if product in wishes_of_user %}
                                        <a class="heart-icon" onclick="click_on_btn_for_heart('{{ product.id }}');"><span class="icon_heart_alt" style="color: red"></span></a>
                                    {% else %}
                                        <a class="heart-icon" onclick="click_on_btn_for_heart('{{ product.id }}');"><span class="icon_heart_alt"></span></a>
                                    {% endif %}
                        
                        <form action="{% url 'change_wish_list' product.id %}" method="POST" class="none">
                            {% csrf_token %}
                            <input type="text" name="path" value="{{ request.path }}">
                            <button id="{{ product.id }}"></button>
                        </form>
                        <ul>
                            {% if product.quantity %}
                                <li><b>{% trans 'Доступность' %}:</b><span>{% trans 'В наличии' %}.</span></li>
                            {% else %}
                                <li><b>{% trans 'Доступность' %}:</b><span>{% trans 'Нет в наличии' %}.</span></li>
                            {% endif %}

                            <li><b>{% trans 'Доставка' %}:</b><span>{% trans 'Один день доставки' %}.</span></li>
                            <li><b>{% trans 'Масса' %}:</b><span>{{ product.weight }} {% trans 'кг' %}.</span></li>

                            {% if product.color %}
                                {% for col in product.color.all %}
                                <li><b>{% trans 'Цвет' %}:</b><span>{{ col }}.</span></li>
                                {% endfor %}
                            {% endif %}                            
                        </ul>
                    </div>
                </div>
                <div class="col-lg-12">
                    <div class="product__details__tab">
                        <ul class="nav nav-tabs" role="tablist">
                            <li class="nav-item">
                                <a class="nav-link active" data-toggle="tab" href="#tabs-1" role="tab"
                                    aria-selected="true">{% trans 'Описание' %}</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-toggle="tab" href="#tabs-3" role="tab"
                                    aria-selected="false">{% trans 'Отзывы' %}<span id="quantity_reviews"></span></a>
                            </li>
                        </ul>
                        <div class="tab-content">

                            <div class="tab-pane active" id="tabs-1" role="tabpanel">
                                <div class="product__details__tab__desc">
                                    <h6>{% trans 'Информация о продукте' %}</h6>
                                    <p>{{ product.description }}</p>
                                </div>
                            </div>

                            <div class="tab-pane" id="tabs-3" role="tabpanel">
                                {% if reviews %}

                                    {% for review in reviews %}
                                        {% if not review.parent %}
                                            <div>
                                                <div class="user" onclick="show_answer_form('{{ review.id }}')">{{ review.user }}</div>
                                                <div class="show_answers" onclick="show_answer('{{ review.id }}')">{% trans 'Показать ответы' %}</div>
                                            </div>
                             
                                            <div class="review">

                                                <form action="{% url 'change_review' review.id %}" method="POST" class="review_text">
                                                    {% csrf_token %}
                                                    <textarea id="text_pencil_{{ review.id }}" style="overflow: hidden;" readonly name="text" class="text">{{ review.text }}</textarea>
                                                    <input type="text" name="path" value="{{ request.path }}" class="none">
                                                    <button class="none" id="btn_text_pencil_{{ review.id }}"></button>
                                                </form>


                                                {% if request.user == review.user %}
                                                    <div class="basket" id="div_basket_{{ review.id }}" onclick="delete_review('{{ review.id }}')">
                                                        <img src="https://img.icons8.com/android/24/000000/full-trash.png"/>
                                                        <input type="text" name="path" value="{{ request.path }}" class="none">
                                                    </div>

                                                    <button class="basket none" id="btn_basket_{{ review.id }}" onclick="back('{{ review.id }}')">
                                                        <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
                                                        width="24" height="24"
                                                        viewBox="0 0 172 172"
                                                        style=" fill:#000000;"><g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,172v-172h172v172z" fill="none"></path><g fill="#ffffff"><path d="M49.5575,44.72l-4.8375,4.8375l36.55,36.4425l-36.55,36.4425l4.8375,4.8375l36.6575,-36.4425l36.55,36.4425l4.8375,-4.8375l-36.55,-36.4425l36.55,-36.4425l-4.8375,-4.8375l-36.55,36.4425z"></path></g></g></svg>
                                                    </button>

                                                    <form class="pencil none" id="form_basket_{{ review.id }}" action="{% url 'remove_review' review.id %}" method="POST" 
                                                    onclick="document.getElementById('btn_basket_form_{{ review.id }}').click();">
                                                        {% csrf_token %}
                                                            <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
                                                            width="24" height="24"
                                                            viewBox="0 0 172 172"
                                                            style=" fill:#000000;"><g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,172v-172h172v172z" fill="none"></path><g fill="#ffffff"><path d="M147.49,29.67c-0.1075,0.02688 -0.215,0.06719 -0.3225,0.1075c-0.90031,0.22844 -1.67969,0.80625 -2.15,1.6125l-70.305,109.005l-48.375,-43.645c-0.84656,-1.075 -2.2575,-1.54531 -3.58781,-1.19594c-1.33031,0.34937 -2.31125,1.46469 -2.51281,2.82187c-0.20156,1.35719 0.41656,2.70094 1.58562,3.42656l51.2775,46.44c0.7525,0.65844 1.76031,0.95406 2.75469,0.80625c0.99438,-0.14781 1.86781,-0.71219 2.40531,-1.55875l72.5625,-112.445c0.79281,-1.12875 0.83313,-2.62031 0.1075,-3.78937c-0.72562,-1.16906 -2.08281,-1.78719 -3.44,-1.58563z"></path></g></g></svg>
                                                        <input type="text" name="path" value="{{ request.path }}" class="none">
                                                        <button class="none" id="btn_basket_form_{{ review.id }}"></button>
                                                    </form>

                                                    <div class="pencil" id="div_pencil_{{ review.id }}" onclick="edit_text('{{ review.id }}');">
                                                        <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
                                                            width="24" height="24"
                                                            viewBox="0 0 172 172"
                                                            style=" fill:#000000;">
                                                            <g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal">
                                                                <path d="M0,172v-172h172v172z" fill="none">
                                                                </path>
                                                                <g fill="#ffffff">
                                                                    <path d="M129,14.33333l-14.33333,14.33333l28.66667,28.66667l14.33333,-14.33333zM103.91667,39.41667l-68.08333,68.08333c0,0 7.2025,0.03583 10.75,3.58333c3.5475,3.5475 3.47135,10.63802 3.47135,10.63802c0,0 7.30731,0.14065 10.86198,3.69531c3.55467,3.55467 3.58333,10.75 3.58333,10.75l68.08333,-68.08333zM26.30111,121.83333l-4.80111,28.66667l28.66667,-4.80111z">
                                                                    </path>
                                                                </g>
                                                            </g>
                                                        </svg>
                                                    </div>

                                                    <button class="basket none" id="btn_pencil_{{ review.id }}" onclick="back('{{ review.id }}')">
                                                        <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
                                                        width="24" height="24"
                                                        viewBox="0 0 172 172"
                                                        style=" fill:#000000;"><g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,172v-172h172v172z" fill="none"></path><g fill="#ffffff"><path d="M49.5575,44.72l-4.8375,4.8375l36.55,36.4425l-36.55,36.4425l4.8375,4.8375l36.6575,-36.4425l36.55,36.4425l4.8375,-4.8375l-36.55,-36.4425l36.55,-36.4425l-4.8375,-4.8375l-36.55,36.4425z"></path></g></g></svg>
                                                    </button>

                                                    <button class="pencil none" id="btn_pencil_form_{{ review.id }}" 
                                                    onclick="document.getElementById('btn_text_pencil_{{ review.id }}').click();">
                                                        <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
                                                        width="24" height="24"
                                                        viewBox="0 0 172 172"
                                                        style=" fill:#000000;"><g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,172v-172h172v172z" fill="none"></path><g fill="#ffffff"><path d="M147.49,29.67c-0.1075,0.02688 -0.215,0.06719 -0.3225,0.1075c-0.90031,0.22844 -1.67969,0.80625 -2.15,1.6125l-70.305,109.005l-48.375,-43.645c-0.84656,-1.075 -2.2575,-1.54531 -3.58781,-1.19594c-1.33031,0.34937 -2.31125,1.46469 -2.51281,2.82187c-0.20156,1.35719 0.41656,2.70094 1.58562,3.42656l51.2775,46.44c0.7525,0.65844 1.76031,0.95406 2.75469,0.80625c0.99438,-0.14781 1.86781,-0.71219 2.40531,-1.55875l72.5625,-112.445c0.79281,-1.12875 0.83313,-2.62031 0.1075,-3.78937c-0.72562,-1.16906 -2.08281,-1.78719 -3.44,-1.58563z"></path></g></g></svg>
                                                    </button>

                                                {% else %}
                                                    <form action="{% url 'add_like' review.id %}" method="POST" class="like_form" onclick="document.getElementById('btr_add_like_{{ review.id }}').click();">
                                                        {% csrf_token %}

                                                        {% if review in liked %}
                                                            {% if review.quantity_of_likes %}{{ review.quantity_of_likes }}{% endif %}
                                                            <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
                                                            width="24" height="24"
                                                            viewBox="0 0 172 172"
                                                            style=" fill:#000000;"><g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,172v-172h172v172z" fill="none"></path><g fill="#3498db"><path d="M101.53711,7.16667l-47.18522,47.26921c-2.68033,2.6875 -4.18522,6.32178 -4.18522,10.12012v71.61068c0,7.91917 6.41417,14.33333 14.33333,14.33333h64.44401c5.72617,0 10.90688,-3.41089 13.17155,-8.67839l21.55599,-50.18066c0.76683,-1.7845 1.16178,-3.71278 1.16178,-5.65494v-14.31934c0,-7.91917 -6.41417,-14.33333 -14.33333,-14.33333h-45.51953l6.71875,-30.79427c1.04633,-4.80167 -0.45677,-9.8152 -3.96127,-13.26953zM7.16667,64.5v86h28.66667v-86z"></path></g></g></svg>
                                                        {% else %}
                                                            {% if review.quantity_of_likes %}{{ review.quantity_of_likes }}{% endif %}
                                                                <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
                                                                width="24" height="24"
                                                                viewBox="0 0 172 172"
                                                                style=" fill:#000000;"><g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,172v-172h172v172z" fill="none"></path><g fill="#ffffff"><path d="M101.53711,7.16667l-47.18522,47.26921c-2.68033,2.6875 -4.18522,6.32178 -4.18522,10.12012v71.61068c0,7.91917 6.41417,14.33333 14.33333,14.33333h64.44401c5.72617,0 10.90688,-3.41089 13.17155,-8.67839l21.55599,-50.18066c0.76683,-1.7845 1.16178,-3.71278 1.16178,-5.65494v-14.31934c0,-7.91917 -6.41417,-14.33333 -14.33333,-14.33333h-45.51953l6.71875,-30.79427c1.04633,-4.80167 -0.45677,-9.8152 -3.96127,-13.26953zM7.16667,64.5v86h28.66667v-86z"></path></g></g></svg>
                                                        {% endif %}
                                                        
                                                            <input type="text" name="path" value="{{ request.path }}" class="none">
                                                            <button class="none" id="btr_add_like_{{ review.id }}"></button>
                                                    </form>
                                                    <form action="{% url 'add_dislike' review.id %}" method="POST" class="dislike_form" onclick="document.getElementById('btr_add_dislike_{{ review.id }}').click();">
                                                        {% csrf_token %}

                                                        {% if review in disliked %}
                                                            {% if review.quantity_of_dislikes %}{{ review.quantity_of_dislikes }}{% endif %}
                                                            <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
                                                            width="24" height="24"
                                                            viewBox="0 0 172 172"
                                                            style=" fill:#000000;"><g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,172v-172h172v172z" fill="none"></path><g fill="#e74c3c"><path d="M14.33333,14.33333c-3.956,0 -7.16667,3.21067 -7.16667,7.16667v71.66667c0,3.956 3.21067,7.16667 7.16667,7.16667h14.33333c3.956,0 7.16667,-3.21067 7.16667,-7.16667v-71.66667c0,-3.956 -3.21067,-7.16667 -7.16667,-7.16667zM64.5,14.33333c-7.91917,0 -14.33333,6.41417 -14.33333,14.33333v71.61068c0,3.79833 1.50489,7.43261 4.18522,10.12011l39.62663,39.71061c4.17817,4.18533 10.94518,4.21232 15.15918,0.06999c2.63017,-2.58717 3.75578,-6.35415 2.96744,-9.96615l-7.12467,-32.71191h45.51953c7.91917,0 14.33333,-6.41417 14.33333,-14.33333v-14.31934c0,-1.94217 -0.39495,-3.87044 -1.16178,-5.65494l-21.55599,-50.18067c-2.2575,-5.2675 -7.44538,-8.67839 -13.17155,-8.67839z"></path></g></g></svg>
                                                        {% else %}
                                                            {% if review.quantity_of_dislikes %}{{ review.quantity_of_dislikes }}{% endif %}
                                                            <img src="https://img.icons8.com/material-rounded/24/000000/thumbs-down.png"/>
                                                        {% endif %}                                                
                                                        
                                                        <input type="text" name="path" value="{{ request.path }}" class="none">
                                                        <button class="none" id="btr_add_dislike_{{ review.id }}"></button>
                                                    </form>
                                                {% endif %}
                                            </div>
                                                <form class="none answer_form" id="answer_form_{{ review.id }}" action="{% url 'add_answer' product.id review.id %}" method="POST">
                                                    {% csrf_token %}
                                                    <input type="text" name="text" id="answer_text_{{ review.id }}">
                                                    <input type="text" name="path" value="{{ request.path }}" class="none"><br>
                                                    <button class="answer_btn">{% trans 'ОТВЕТИТЬ' %}</button>
                                                </form>

                                            
                                        {% endif %}

                                        {% for answer in reviews %}
                                            {% if answer.parent == review %}
                                                

                                            <div class="review_answer none answer_{{ review.id }}">
                                                <form action="{% url 'change_review' answer.id %}" method="POST" class="review_text">
                                                    {% csrf_token %}
                                                    <textarea id="text_pencil_{{ answer.id }}" style="overflow: hidden;" readonly name="text" class="text">{{ answer.text }}</textarea>
                                                    <input type="text" name="path" value="{{ request.path }}" class="none">
                                                    <button class="none" id="btn_text_pencil_{{ answer.id }}"></button>
                                                </form>


                                                {% if request.user == answer.user %}
                                                    <div class="basket_answer" id="div_basket_{{ answer.id }}" onclick="delete_review('{{ answer.id }}')">
                                                        <img src="https://img.icons8.com/android/24/000000/full-trash.png"/>
                                                        <input type="text" name="path" value="{{ request.path }}" class="none">
                                                    </div>

                                                    <button class="basket_answer none" id="btn_basket_{{ answer.id }}" onclick="back('{{ answer.id }}')">
                                                        <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
                                                        width="24" height="24"
                                                        viewBox="0 0 172 172"
                                                        style=" fill:#000000;"><g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,172v-172h172v172z" fill="none"></path><g fill="#ffffff"><path d="M49.5575,44.72l-4.8375,4.8375l36.55,36.4425l-36.55,36.4425l4.8375,4.8375l36.6575,-36.4425l36.55,36.4425l4.8375,-4.8375l-36.55,-36.4425l36.55,-36.4425l-4.8375,-4.8375l-36.55,36.4425z"></path></g></g></svg>
                                                    </button>

                                                    <form class="pencil_answer none" id="form_basket_{{ answer.id }}" action="{% url 'remove_review' answer.id %}" method="POST" 
                                                    onclick="document.getElementById('btn_basket_form_{{ answer.id }}').click();">
                                                        {% csrf_token %}
                                                            <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
                                                            width="24" height="24"
                                                            viewBox="0 0 172 172"
                                                            style=" fill:#000000;"><g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,172v-172h172v172z" fill="none"></path><g fill="#ffffff"><path d="M147.49,29.67c-0.1075,0.02688 -0.215,0.06719 -0.3225,0.1075c-0.90031,0.22844 -1.67969,0.80625 -2.15,1.6125l-70.305,109.005l-48.375,-43.645c-0.84656,-1.075 -2.2575,-1.54531 -3.58781,-1.19594c-1.33031,0.34937 -2.31125,1.46469 -2.51281,2.82187c-0.20156,1.35719 0.41656,2.70094 1.58562,3.42656l51.2775,46.44c0.7525,0.65844 1.76031,0.95406 2.75469,0.80625c0.99438,-0.14781 1.86781,-0.71219 2.40531,-1.55875l72.5625,-112.445c0.79281,-1.12875 0.83313,-2.62031 0.1075,-3.78937c-0.72562,-1.16906 -2.08281,-1.78719 -3.44,-1.58563z"></path></g></g></svg>
                                                        <input type="text" name="path" value="{{ request.path }}" class="none">
                                                        <button class="none" id="btn_basket_form_{{ answer.id }}"></button>
                                                    </form>

                                                    <div class="pencil_answer" id="div_pencil_{{ answer.id }}" onclick="edit_text('{{ answer.id }}');">
                                                        <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
                                                            width="24" height="24"
                                                            viewBox="0 0 172 172"
                                                            style=" fill:#000000;">
                                                            <g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal">
                                                                <path d="M0,172v-172h172v172z" fill="none">
                                                                </path>
                                                                <g fill="#ffffff">
                                                                    <path d="M129,14.33333l-14.33333,14.33333l28.66667,28.66667l14.33333,-14.33333zM103.91667,39.41667l-68.08333,68.08333c0,0 7.2025,0.03583 10.75,3.58333c3.5475,3.5475 3.47135,10.63802 3.47135,10.63802c0,0 7.30731,0.14065 10.86198,3.69531c3.55467,3.55467 3.58333,10.75 3.58333,10.75l68.08333,-68.08333zM26.30111,121.83333l-4.80111,28.66667l28.66667,-4.80111z">
                                                                    </path>
                                                                </g>
                                                            </g>
                                                        </svg>
                                                    </div>

                                                    <button class="basket_answer none" id="btn_pencil_{{ answer.id }}" onclick="back('{{ answer.id }}')">
                                                        <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
                                                        width="24" height="24"
                                                        viewBox="0 0 172 172"
                                                        style=" fill:#000000;"><g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,172v-172h172v172z" fill="none"></path><g fill="#ffffff"><path d="M49.5575,44.72l-4.8375,4.8375l36.55,36.4425l-36.55,36.4425l4.8375,4.8375l36.6575,-36.4425l36.55,36.4425l4.8375,-4.8375l-36.55,-36.4425l36.55,-36.4425l-4.8375,-4.8375l-36.55,36.4425z"></path></g></g></svg>
                                                    </button>

                                                    <button class="pencil_answer none" id="btn_pencil_form_{{ answer.id }}" 
                                                    onclick="document.getElementById('btn_text_pencil_{{ answer.id }}').click();">
                                                        <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
                                                        width="24" height="24"
                                                        viewBox="0 0 172 172"
                                                        style=" fill:#000000;"><g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,172v-172h172v172z" fill="none"></path><g fill="#ffffff"><path d="M147.49,29.67c-0.1075,0.02688 -0.215,0.06719 -0.3225,0.1075c-0.90031,0.22844 -1.67969,0.80625 -2.15,1.6125l-70.305,109.005l-48.375,-43.645c-0.84656,-1.075 -2.2575,-1.54531 -3.58781,-1.19594c-1.33031,0.34937 -2.31125,1.46469 -2.51281,2.82187c-0.20156,1.35719 0.41656,2.70094 1.58562,3.42656l51.2775,46.44c0.7525,0.65844 1.76031,0.95406 2.75469,0.80625c0.99438,-0.14781 1.86781,-0.71219 2.40531,-1.55875l72.5625,-112.445c0.79281,-1.12875 0.83313,-2.62031 0.1075,-3.78937c-0.72562,-1.16906 -2.08281,-1.78719 -3.44,-1.58563z"></path></g></g></svg>
                                                    </button>

                                                {% else %}
                                                    <form action="{% url 'add_like' answer.id %}" method="POST" class="like_form_answer" onclick="document.getElementById('btr_add_like_{{ answer.id }}').click();">
                                                        {% csrf_token %}

                                                        {% if answer in liked %}
                                                            {% if answer.quantity_of_likes %}{{ answer.quantity_of_likes }}{% endif %}
                                                            <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
                                                            width="24" height="24"
                                                            viewBox="0 0 172 172"
                                                            style=" fill:#000000;"><g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,172v-172h172v172z" fill="none"></path><g fill="#3498db"><path d="M101.53711,7.16667l-47.18522,47.26921c-2.68033,2.6875 -4.18522,6.32178 -4.18522,10.12012v71.61068c0,7.91917 6.41417,14.33333 14.33333,14.33333h64.44401c5.72617,0 10.90688,-3.41089 13.17155,-8.67839l21.55599,-50.18066c0.76683,-1.7845 1.16178,-3.71278 1.16178,-5.65494v-14.31934c0,-7.91917 -6.41417,-14.33333 -14.33333,-14.33333h-45.51953l6.71875,-30.79427c1.04633,-4.80167 -0.45677,-9.8152 -3.96127,-13.26953zM7.16667,64.5v86h28.66667v-86z"></path></g></g></svg>
                                                        {% else %}
                                                            {% if answer.quantity_of_likes %}{{ answer.quantity_of_likes }}{% endif %}
                                                                <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
                                                                width="24" height="24"
                                                                viewBox="0 0 172 172"
                                                                style=" fill:#000000;"><g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,172v-172h172v172z" fill="none"></path><g fill="#ffffff"><path d="M101.53711,7.16667l-47.18522,47.26921c-2.68033,2.6875 -4.18522,6.32178 -4.18522,10.12012v71.61068c0,7.91917 6.41417,14.33333 14.33333,14.33333h64.44401c5.72617,0 10.90688,-3.41089 13.17155,-8.67839l21.55599,-50.18066c0.76683,-1.7845 1.16178,-3.71278 1.16178,-5.65494v-14.31934c0,-7.91917 -6.41417,-14.33333 -14.33333,-14.33333h-45.51953l6.71875,-30.79427c1.04633,-4.80167 -0.45677,-9.8152 -3.96127,-13.26953zM7.16667,64.5v86h28.66667v-86z"></path></g></g></svg>
                                                        {% endif %}
                                                        
                                                            <input type="text" name="path" value="{{ request.path }}" class="none">
                                                            <button class="none" id="btr_add_like_{{ answer.id }}"></button>
                                                    </form>
                                                    <form action="{% url 'add_dislike' answer.id %}" method="POST" class="dislike_form_answer" onclick="document.getElementById('btr_add_dislike_{{ answer.id }}').click();">
                                                        {% csrf_token %}

                                                        {% if answer in disliked %}
                                                            {% if answer.quantity_of_dislikes %}{{ answer.quantity_of_dislikes }}{% endif %}
                                                            <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
                                                            width="24" height="24"
                                                            viewBox="0 0 172 172"
                                                            style=" fill:#000000;"><g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,172v-172h172v172z" fill="none"></path><g fill="#e74c3c"><path d="M14.33333,14.33333c-3.956,0 -7.16667,3.21067 -7.16667,7.16667v71.66667c0,3.956 3.21067,7.16667 7.16667,7.16667h14.33333c3.956,0 7.16667,-3.21067 7.16667,-7.16667v-71.66667c0,-3.956 -3.21067,-7.16667 -7.16667,-7.16667zM64.5,14.33333c-7.91917,0 -14.33333,6.41417 -14.33333,14.33333v71.61068c0,3.79833 1.50489,7.43261 4.18522,10.12011l39.62663,39.71061c4.17817,4.18533 10.94518,4.21232 15.15918,0.06999c2.63017,-2.58717 3.75578,-6.35415 2.96744,-9.96615l-7.12467,-32.71191h45.51953c7.91917,0 14.33333,-6.41417 14.33333,-14.33333v-14.31934c0,-1.94217 -0.39495,-3.87044 -1.16178,-5.65494l-21.55599,-50.18067c-2.2575,-5.2675 -7.44538,-8.67839 -13.17155,-8.67839z"></path></g></g></svg>
                                                        {% else %}
                                                            {% if answer.quantity_of_dislikes %}{{ answer.quantity_of_dislikes }}{% endif %}
                                                            <img src="https://img.icons8.com/material-rounded/24/000000/thumbs-down.png"/>
                                                        {% endif %}                                                
                                                        
                                                        <input type="text" name="path" value="{{ request.path }}" class="none">
                                                        <button class="none" id="btr_add_dislike_{{ answer.id }}"></button>
                                                    </form>
                                                {% endif %}
                                            </div>

                                            {% endif %}
                                        {% endfor %}
                                    {% endfor %}
                                {% else %}
                                    <p>Оставьте первый отзыв!</p>
                                {% endif %}



                                {% if request.user.is_authenticated %}

                                    <form class="add_review_form" method="POST" action="{% url 'add_review' product.id %}">
                                        {% csrf_token %}
                                        <textarea placeholder="{% trans 'Ваш отзыв' %}" name="text" class="textarea"></textarea><br>
                                        <input type="text" name="path" class="none" value="{{ request.path }}">
                                        <button type="submit">{% trans 'ОСТАВИТЬ ОТЗЫВ' %}</button>
                                    </form>

                                {% else %}
                                    <p>{% trans 'Чтобы добавить отзыв нужно ввойти в аккаунт' %}</p>
                                {% endif %}

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Product Details Section End -->

    <!-- Related Product Section Begin -->
    <section class="related-product">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="section-title related__product__title">
                        <h2>{% trans 'Похожий продукт' %}</h2>
                    </div>
                </div>
            </div>
            <div class="row">
                {% for product in similar_products %}
                <div class="col-lg-3 col-md-4 col-sm-6">
                    <div class="product__item">
                        <div class="product__item__pic set-bg" data-setbg="{{ product.img.url }}">
                            <ul class="product__item__pic__hover">
                                <li>
                                    {% if product in wishes_of_user %}
                                        <a onclick="click_on_btn_for_heart('{{ product.id }}');"><i class="fa fa-heart" style="color: red"></i></a>
                                    {% else %}
                                        <a onclick="click_on_btn_for_heart('{{ product.id }}');"><i class="fa fa-heart"></i></a>
                                    {% endif %}
                                    <form action="{% url 'change_wish_list' product.id %}" method="POST" class="none">
                                        {% csrf_token %}
                                        <input type="text" name="path" value="{{ request.path }}">
                                        <button id="{{ product.id }}"></button>
                                    </form>
                                </li>
                                <li><a href="#"><i class="fa fa-shopping-cart"></i></a></li>
                            </ul>
                        </div>
                        <div class="product__item__text">
                            <h6><a href="{{ product.get_absolute_url }}">{{ product.name }}</a></h6>
                            {% if product.price_with_sale %}
                                <h5>${{ product.price_with_sale }}</h5>
                            {% else %}
                                <h5>${{ product.price }}</h5>
                            {% endif %}
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </section>
    <script>
        let reviews = document.getElementsByClassName('review');

        document.getElementById('quantity_reviews_top').innerHTML = '(' + reviews.length + " {% trans 'отзывов' %}" + ')';
    </script>
{% endblock %}